{% extends "administration/base_admin.html" %}

{% block admin_content %}
<div class="admin-header">
    <h1 class="admin-page-title">Mod√©ration des Groupes</h1>
    <div class="admin-controls">
        <form method="get" class="admin-search-form">
            <input type="text" name="q" placeholder="Rechercher un groupe..." value="{{ request.GET.q }}">
            <button type="submit" class="btn btn-secondary">Rechercher</button>
        </form>
    </div>
</div>

<table class="admin-table">
    <thead>
        <tr>
            <th>Nom</th>
            <th>Cr√©ateur</th>
            <th>Membres</th>
            <th>Cr√©√© le</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for group in groups %}
        <tr>
            <td>
                <div class="group-cell">
                    {% if group.icon %}
                    <img src="{{ group.icon.url }}" alt="icon" class="group-icon">
                    {% else %}
                    <div class="group-icon-placeholder">{{ group.name|first|upper }}</div>
                    {% endif %}
                    {{ group.name }}
                </div>
            </td>
            <td>
                {% if group.owner %}
                <a href="{% url 'administration:user_list' %}?q={{ group.owner.nickname }}">{{ group.owner.nickname
                    }}</a>
                {% else %}
                <span class="text-muted">Syst√®me</span>
                {% endif %}
            </td>
            <td>{{ group.memberships.count }}</td>
            <td>{{ group.created_at|date:"d M Y" }}</td>
            <td>
                <a href="{% url 'administration:group_edit' group.id %}" class="btn-icon"
                    title="√âditer / Mod√©rer">‚öôÔ∏è</a>
                <form action="{% url 'administration:group_delete' group.id %}" method="POST" class="inline-form"
                    onsubmit="return confirm('Supprimer ce groupe ?');">
                    {% csrf_token %}
                    <button type="submit" class="btn-icon delete" title="Supprimer">üóëÔ∏è</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="empty-state">Aucun groupe trouv√©.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}