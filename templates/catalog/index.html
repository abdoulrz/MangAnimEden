{% extends 'base.html' %}
{% load static %}

{% block title %}Catalogue - MangAnimEDen{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/catalog.css' %}?v={{ STATIC_VERSION }}">
{% endblock %}

{% block content %}
<div class="container catalog-container">

    <div class="catalog-layout">
        <!-- Main Content Area (Left) -->
        <main class="catalog-main">
            <!-- Search Section -->
            <div class="catalog-search">
                <div class="catalog-search-wrapper">
                    <input type="text" placeholder="Rechercher un manga..." class="input catalog-search-input">
                    <span class="catalog-search-icon">ğŸ”</span>
                </div>
            </div>

            <!-- Manga Grid -->
            <section class="catalog-section">
                <div class="block-header">
                    <h2 class="block-title"><span>ğŸ“š</span> Catalogue Complet</h2>
                </div>

                <div class="catalog-grid">
                    {% for series in series_list %}
                    <a href="{% url 'catalog:detail' series.id %}" class="manga-card">
                        <div class="manga-cover">
                            {% if series.cover %}
                            <img src="{{ series.cover.url }}" alt="{{ series.title }}" class="manga-image">
                            {% else %}
                            <div class="manga-image placeholder"></div>
                            {% endif %}
                            <span class="badge-status">{{ series.get_status_display }}</span>
                            <!-- Rating is hardcoded or needs a field, using placeholder for now -->
                            <!-- <div class="badge-rating"><span>â˜…</span> 4.X</div> -->
                        </div>
                        <h3 class="manga-title">{{ series.title }}</h3>
                        <p class="manga-meta">{{ series.author }}</p>
                    </a>
                    {% empty %}
                    <p>Aucun manga trouvÃ©.</p>
                    {% endfor %}
                </div>
            </section>
        </main>

        <!-- Sidebar Area (Right) -->
        <aside class="trending-sidebar">
            <div class="trending-block">
                <div class="trending-header">
                    <h2 class="trending-title"><span>ğŸ”¥</span> Tendance</h2>
                </div>

                <div class="trending-list">
                    {% for item in trending_series %}
                    <a href="{% url 'catalog:detail' item.id %}" class="trending-item">
                        <span class="trending-rank">{{ forloop.counter }}</span>
                        {% if item.cover %}
                        <img src="{{ item.cover.url }}" alt="{{ item.title }}" class="trending-cover">
                        {% else %}
                        <div class="trending-cover placeholder-trending">?</div>
                        {% endif %}
                        <div class="trending-info">
                            <h4 class="trending-name">{{ item.title }}</h4>
                            <div class="trending-stats">
                                <span class="trending-stat-icon">ğŸ‘</span> {{ item.views_count }} vues
                            </div>
                        </div>
                    </a>
                    {% empty %}
                    <p class="trending-empty">Aucune tendance pour le moment.</p>
                    {% endfor %}
                </div>
            </div>
        </aside>

    </div>

</div>
{% endblock %}